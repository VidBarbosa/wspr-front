{
  "version": 3,
  "sources": ["../../../app/routes/login.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\login.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\login.tsx\");\n  import.meta.hot.lastModified = \"1764285760308.3523\";\n}\n// REMIX HMR END\n\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, useActionData, useLoaderData, useSearchParams } from \"@remix-run/react\";\nimport { verifyLogin, createUserSession, getAdminUser, getSessionUser } from \"../services/auth.server\";\nexport async function loader({\n  request\n}) {\n  const admin = await getAdminUser();\n  const currentUser = await getSessionUser(request);\n  if (currentUser && currentUser.role === \"admin\") {\n    return redirect(\"/onboarding\");\n  }\n  return json({\n    canLogin: !!admin\n  });\n}\nexport async function action({\n  request\n}) {\n  const formData = await request.formData();\n  const email = String(formData.get(\"email\") || \"\");\n  const password = String(formData.get(\"password\") || \"\");\n  const redirectTo = String(formData.get(\"redirectTo\") || \"/onboarding\");\n  if (!email || !password) {\n    return json({\n      error: \"Email and password are required.\"\n    }, {\n      status: 400\n    });\n  }\n  const user = await verifyLogin(email, password);\n  if (!user) {\n    return json({\n      error: \"Invalid credentials.\"\n    }, {\n      status: 400\n    });\n  }\n  const setCookie = await createUserSession(user);\n  return redirect(redirectTo, {\n    headers: {\n      \"Set-Cookie\": setCookie\n    }\n  });\n}\nexport default function LoginRoute() {\n  _s();\n  const {\n    canLogin\n  } = useLoaderData();\n  const actionData = useActionData();\n  const [searchParams] = useSearchParams();\n  const redirectTo = searchParams.get(\"redirectTo\") ?? \"/onboarding\";\n  return <main className=\"flex min-h-screen items-center justify-center bg-slate-950 text-slate-50\">\n      <div className=\"w-full max-w-md rounded-xl bg-slate-900 p-8 shadow-xl shadow-slate-950/60\">\n        <h1 className=\"mb-2 text-center text-2xl font-semibold\">Admin Login</h1>\n        <p className=\"mb-6 text-center text-sm text-slate-400\">\n          Sign in with the admin account to access the onboarding panel.\n        </p>\n\n        {!canLogin ? <div className=\"rounded-lg border border-amber-500/60 bg-amber-500/10 p-4 text-sm text-amber-100\">\n            <p className=\"font-medium\">No admin user found.</p>\n            <p>\n              You must create the first admin account on the{\" \"}\n              <a href=\"/register\" className=\"font-semibold text-amber-300 underline\">\n                registration page\n              </a>\n              .\n            </p>\n          </div> : <Form method=\"post\" className=\"space-y-4\">\n            <input type=\"hidden\" name=\"redirectTo\" value={redirectTo} />\n            <div className=\"space-y-1\">\n              <label htmlFor=\"email\" className=\"text-sm font-medium text-slate-200\">\n                Email\n              </label>\n              <input id=\"email\" name=\"email\" type=\"email\" autoComplete=\"email\" className=\"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none ring-0 focus:border-sky-500 focus:ring-2 focus:ring-sky-500/40\" placeholder=\"admin@example.com\" />\n            </div>\n\n            <div className=\"space-y-1\">\n              <label htmlFor=\"password\" className=\"text-sm font-medium text-slate-200\">\n                Password\n              </label>\n              <input id=\"password\" name=\"password\" type=\"password\" autoComplete=\"current-password\" className=\"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none ring-0 focus:border-sky-500 focus:ring-2 focus:ring-sky-500/40\" placeholder=\"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\" />\n            </div>\n\n            {actionData?.error ? <p className=\"rounded-lg border border-rose-500/60 bg-rose-500/10 p-2 text-xs text-rose-100\">\n                {actionData.error}\n              </p> : null}\n\n            <button type=\"submit\" className=\"flex w-full items-center justify-center rounded-lg bg-sky-500 px-4 py-2 text-sm font-semibold text-slate-950 transition hover:bg-sky-400\">\n              Sign in\n            </button>\n\n            <p className=\"mt-2 text-center text-xs text-slate-500\">\n              First time here?{\" \"}\n              <a href=\"/register\" className=\"font-medium text-sky-300 hover:underline\">\n                Create the admin account\n              </a>\n              .\n            </p>\n          </Form>}\n      </div>\n    </main>;\n}\n_s(LoginRoute, \"TTgW/GvhZ4tOHl8fxUynK+5dxOU=\", false, function () {\n  return [useLoaderData, useActionData, useSearchParams];\n});\n_c = LoginRoute;\nvar _c;\n$RefreshReg$(_c, \"LoginRoute\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": []
}
