{
  "version": 3,
  "sources": ["../../../app/routes/register.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\register.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\register.tsx\");\n  import.meta.hot.lastModified = \"1764285760324.0535\";\n}\n// REMIX HMR END\n\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, useActionData, useLoaderData } from \"@remix-run/react\";\nimport { getAdminUser, registerAdmin, createUserSession } from \"../services/auth.server\";\nexport async function loader({\n  request\n}) {\n  const admin = await getAdminUser();\n  if (admin) {\n    return redirect(\"/login\");\n  }\n  return json({\n    hasAdmin: false\n  });\n}\nexport async function action({\n  request\n}) {\n  const formData = await request.formData();\n  const email = String(formData.get(\"email\") || \"\");\n  const password = String(formData.get(\"password\") || \"\");\n  const confirm = String(formData.get(\"confirmPassword\") || \"\");\n  if (!email || !password || !confirm) {\n    return json({\n      error: \"All fields are required.\"\n    }, {\n      status: 400\n    });\n  }\n  if (password !== confirm) {\n    return json({\n      error: \"Passwords do not match.\"\n    }, {\n      status: 400\n    });\n  }\n  try {\n    const user = await registerAdmin(email, password);\n    const setCookie = await createUserSession(user);\n    return redirect(\"/onboarding\", {\n      headers: {\n        \"Set-Cookie\": setCookie\n      }\n    });\n  } catch (err) {\n    return json({\n      error: err?.message ?? \"Unable to register admin user.\"\n    }, {\n      status: 400\n    });\n  }\n}\nexport default function RegisterRoute() {\n  _s();\n  const {\n    hasAdmin\n  } = useLoaderData();\n  const actionData = useActionData();\n  return <main className=\"flex min-h-screen items-center justify-center bg-slate-950 text-slate-50\">\n      <div className=\"w-full max-w-md rounded-xl bg-slate-900 p-8 shadow-xl shadow-slate-950/60\">\n        <h1 className=\"mb-2 text-center text-2xl font-semibold\">Create Admin Account</h1>\n        <p className=\"mb-6 text-center text-sm text-slate-400\">\n          This is a white-label provider app. The admin user is responsible for onboarding and managing brands.\n        </p>\n\n        {hasAdmin ? <div className=\"rounded-lg border border-emerald-500/60 bg-emerald-500/10 p-4 text-sm text-emerald-100\">\n            <p className=\"font-medium\">Admin already exists.</p>\n            <p>\n              You can{\" \"}\n              <a href=\"/login\" className=\"font-semibold text-emerald-300 underline\">\n                sign in here\n              </a>\n              .\n            </p>\n          </div> : <Form method=\"post\" className=\"space-y-4\">\n            <div className=\"space-y-1\">\n              <label htmlFor=\"email\" className=\"text-sm font-medium text-slate-200\">\n                Admin email\n              </label>\n              <input id=\"email\" name=\"email\" type=\"email\" autoComplete=\"email\" className=\"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none ring-0 focus:border-sky-500 focus:ring-2 focus:ring-sky-500/40\" placeholder=\"admin@example.com\" />\n            </div>\n\n            <div className=\"space-y-1\">\n              <label htmlFor=\"password\" className=\"text-sm font-medium text-slate-200\">\n                Password\n              </label>\n              <input id=\"password\" name=\"password\" type=\"password\" autoComplete=\"new-password\" className=\"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none ring-0 focus:border-sky-500 focus:ring-2 focus:ring-sky-500/40\" placeholder=\"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\" />\n            </div>\n\n            <div className=\"space-y-1\">\n              <label htmlFor=\"confirmPassword\" className=\"text-sm font-medium text-slate-200\">\n                Confirm password\n              </label>\n              <input id=\"confirmPassword\" name=\"confirmPassword\" type=\"password\" autoComplete=\"new-password\" className=\"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm outline-none ring-0 focus:border-sky-500 focus:ring-2 focus:ring-sky-500/40\" placeholder=\"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\" />\n            </div>\n\n            {actionData?.error ? <p className=\"rounded-lg border border-rose-500/60 bg-rose-500/10 p-2 text-xs text-rose-100\">\n                {actionData.error}\n              </p> : null}\n\n            <button type=\"submit\" className=\"flex w-full items-center justify-center rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 transition hover:bg-emerald-400\">\n              Create admin &amp; continue\n            </button>\n          </Form>}\n      </div>\n    </main>;\n}\n_s(RegisterRoute, \"qLmEqNoIhd6lB28TGmFCAduvTzw=\", false, function () {\n  return [useLoaderData, useActionData];\n});\n_c = RegisterRoute;\nvar _c;\n$RefreshReg$(_c, \"RegisterRoute\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,kBAA+B;AAE/B,kBAA+D;AAyDvD;AA/ER,IAAI,CAAC,OAAO,gBAAgB,CAAC,OAAO,gBAAgB,CAAC,OAAO,kBAAkB;AAC5E,UAAQ,KAAK,kGAAkG;AACjH,OAAO;AACD,mBAAiB,OAAO;AACxB,mBAAiB,OAAO;AAC5B,SAAO,eAAe,CAAC,MAAM,OAAO;AAClC,WAAO,iBAAiB,SAAS,MAAM,oCAAsC,EAAE;AAAA,EACjF;AACA,SAAO,eAAe,OAAO,iBAAiB;AAChD;AANM;AACA;AAMN,IAAI,KAAK,aAAa;AAEtB,IAAI,aAAa;AACf,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EAA2B;AAC3B,cAAY,IAAI,eAAe;AACjC;AAsDe,SAAR,gBAAiC;AACtC,KAAG;AACH,QAAM;AAAA,IACJ;AAAA,EACF,IAAI,cAAc;AAClB,QAAM,aAAa,cAAc;AACjC,SAAO,mDAAC,UAAK,WAAU,4EACnB,6DAAC,SAAI,WAAU,6EACb;AAAA,uDAAC,QAAG,WAAU,2CAA0C,oCAAxD;AAAA;AAAA;AAAA;AAAA,WAA4E;AAAA,IAC5E,mDAAC,OAAE,WAAU,2CAA0C,qHAAvD;AAAA;AAAA;AAAA;AAAA,WAEA;AAAA,IAEC,WAAW,mDAAC,SAAI,WAAU,0FACvB;AAAA,yDAAC,OAAE,WAAU,eAAc,qCAA3B;AAAA;AAAA;AAAA;AAAA,aAAgD;AAAA,MAChD,mDAAC,OAAE;AAAA;AAAA,QACO;AAAA,QACR,mDAAC,OAAE,MAAK,UAAS,WAAU,4CAA2C,4BAAtE;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,QAAI;AAAA,WAJN;AAAA;AAAA;AAAA;AAAA,aAMA;AAAA,SARQ;AAAA;AAAA;AAAA;AAAA,WASV,IAAS,mDAAC,QAAK,QAAO,QAAO,WAAU,aACrC;AAAA,yDAAC,SAAI,WAAU,aACb;AAAA,2DAAC,WAAM,SAAQ,SAAQ,WAAU,sCAAqC,2BAAtE;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,QACA,mDAAC,WAAM,IAAG,SAAQ,MAAK,SAAQ,MAAK,SAAQ,cAAa,SAAQ,WAAU,wJAAuJ,aAAY,uBAA9O;AAAA;AAAA;AAAA;AAAA,eAAkQ;AAAA,WAJpQ;AAAA;AAAA;AAAA;AAAA,aAKA;AAAA,MAEA,mDAAC,SAAI,WAAU,aACb;AAAA,2DAAC,WAAM,SAAQ,YAAW,WAAU,sCAAqC,wBAAzE;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,QACA,mDAAC,WAAM,IAAG,YAAW,MAAK,YAAW,MAAK,YAAW,cAAa,gBAAe,WAAU,wJAAuJ,aAAY,sDAA9P;AAAA;AAAA;AAAA;AAAA,eAAyQ;AAAA,WAJ3Q;AAAA;AAAA;AAAA;AAAA,aAKA;AAAA,MAEA,mDAAC,SAAI,WAAU,aACb;AAAA,2DAAC,WAAM,SAAQ,mBAAkB,WAAU,sCAAqC,gCAAhF;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,QACA,mDAAC,WAAM,IAAG,mBAAkB,MAAK,mBAAkB,MAAK,YAAW,cAAa,gBAAe,WAAU,wJAAuJ,aAAY,sDAA5Q;AAAA;AAAA;AAAA;AAAA,eAAuR;AAAA,WAJzR;AAAA;AAAA;AAAA;AAAA,aAKA;AAAA,MAEC,YAAY,QAAQ,mDAAC,OAAE,WAAU,iFAC7B,qBAAW,SADK;AAAA;AAAA;AAAA;AAAA,aAEnB,IAAO;AAAA,MAET,mDAAC,YAAO,MAAK,UAAS,WAAU,oJAAmJ,uCAAnL;AAAA;AAAA;AAAA;AAAA,aAEA;AAAA,SA5BO;AAAA;AAAA;AAAA;AAAA,WA6BT;AAAA,OA5CJ;AAAA;AAAA;AAAA;AAAA,SA6CA,KA9CG;AAAA;AAAA;AAAA;AAAA,SA+CL;AACJ;AACA,GAAG,eAAe,gCAAgC,OAAO,WAAY;AACnE,SAAO,CAAC,eAAe,aAAa;AACtC,CAAC;AACD,KAAK;AACL,IAAI;AACJ,aAAa,IAAI,eAAe;AAEhC,OAAO,eAAe;AACtB,OAAO,eAAe;",
  "names": []
}
