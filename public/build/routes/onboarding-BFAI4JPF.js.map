{
  "version": 3,
  "sources": ["../../../app/routes/onboarding.tsx"],
  "sourcesContent": ["// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app\\\\\\\\routes\\\\\\\\onboarding.tsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app\\\\routes\\\\onboarding.tsx\");\n  import.meta.hot.lastModified = \"1764285760324.0535\";\n}\n// REMIX HMR END\n\n// app/routes/onboarding.tsx\n\nimport { json, redirect } from \"@remix-run/node\";\nimport { Form, useLoaderData } from \"@remix-run/react\";\nimport { getTenantConfig, getTenantIdFromRequest, persistTenantBrandingOverride } from \"../services/tenant-config.server\";\nimport { getSessionUser } from \"../services/auth.server\";\nexport async function loader({\n  request\n}) {\n  const url = new URL(request.url);\n  const sessionUser = await getSessionUser(request);\n\n  // Protect onboarding: only the admin user can access this route.\n  if (!sessionUser || sessionUser.role !== \"admin\") {\n    const redirectTo = url.pathname + url.search;\n    return redirect(`/login?redirectTo=${encodeURIComponent(redirectTo)}`);\n  }\n  const cfg = getTenantConfig(request);\n  const tenantId = getTenantIdFromRequest(request);\n  return json({\n    cfg,\n    tenantId\n  });\n}\nexport async function action({\n  request\n}) {\n  const url = new URL(request.url);\n  const sessionUser = await getSessionUser(request);\n\n  // Protect onboarding writes as well.\n  if (!sessionUser || sessionUser.role !== \"admin\") {\n    const redirectTo = url.pathname + url.search;\n    return redirect(`/login?redirectTo=${encodeURIComponent(redirectTo)}`);\n  }\n  const tenantId = getTenantIdFromRequest(request);\n  const form = await request.formData();\n  const brandName = String(form.get(\"brandName\") || \"\").trim();\n  const themeColor = String(form.get(\"themeColor\") || \"\").trim();\n  const backgroundColor = String(form.get(\"backgroundColor\") || \"\").trim();\n  const practiceId = String(form.get(\"practiceId\") || \"\").trim();\n  const logoPath = String(form.get(\"logoPath\") || \"\").trim();\n  await persistTenantBrandingOverride(tenantId, {\n    ...(brandName && {\n      brandName\n    }),\n    ...(themeColor && {\n      themeColor\n    }),\n    ...(backgroundColor && {\n      backgroundColor\n    }),\n    ...(practiceId && {\n      practiceId\n    }),\n    ...(logoPath && {\n      logoPath\n    })\n  });\n  return redirect(`/desktop?tenant=${tenantId}`);\n}\nexport default function OnboardingRoute() {\n  _s();\n  const {\n    cfg,\n    tenantId\n  } = useLoaderData();\n  return <main className=\"mx-auto max-w-3xl space-y-6 px-4 py-10\">\n      <header className=\"space-y-2\">\n        <h1 className=\"text-3xl font-bold\">\n          \uD83C\uDFA8 Onboarding Wizard{\" \"}\n          <span className=\"text-sm font-normal text-slate-500\">(tenant: {tenantId})</span>\n        </h1>\n        <p className=\"text-slate-600\">\n          This admin\u2011only screen lets you register and configure white\u2011label brands\n          (tenants) for this provider app.\n        </p>\n        <p className=\"text-xs text-slate-500\">\n          To create a <strong>new tenant</strong>, simply open this page with{\" \"}\n          <code>?tenant=&lt;tenant-id&gt;</code> in the URL (for example{\" \"}\n          <code>/onboarding?tenant=acme</code>). The record will be created in{\" \"}\n          <code>app/config/tenants.json</code> after you save.\n        </p>\n      </header>\n\n      <section className=\"space-y-4 rounded-xl border bg-white p-6 shadow-sm\">\n        <h2 className=\"text-lg font-semibold\">Brand configuration</h2>\n        <p className=\"text-sm text-slate-500\">\n          These values define how the tenant looks across the PWA (colors, logo and display\n          name). All tenants share the same codebase but have isolated branding.\n        </p>\n\n        <Form method=\"post\" className=\"space-y-4\">\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <div className=\"space-y-1\">\n              <label htmlFor=\"brandName\" className=\"text-sm font-medium\">\n                Brand name\n              </label>\n              <input id=\"brandName\" name=\"brandName\" className=\"mt-1 w-full rounded border px-3 py-2 text-sm\" placeholder=\"ACME Health\" defaultValue={cfg.brandName} />\n            </div>\n\n            <div className=\"space-y-1\">\n              <label htmlFor=\"practiceId\" className=\"text-sm font-medium\">\n                Practice / external id\n              </label>\n              <input id=\"practiceId\" name=\"practiceId\" className=\"mt-1 w-full rounded border px-3 py-2 text-sm\" placeholder=\"acme-health-001\" defaultValue={cfg.practiceId} />\n            </div>\n          </div>\n\n          <div className=\"grid gap-4 md:grid-cols-3\">\n            <div className=\"space-y-1\">\n              <label htmlFor=\"themeColor\" className=\"text-sm font-medium\">\n                Theme color\n              </label>\n              <input id=\"themeColor\" name=\"themeColor\" type=\"color\" className=\"mt-1 h-10 w-full rounded border\" defaultValue={cfg.themeColor} />\n            </div>\n\n            <div className=\"space-y-1\">\n              <label htmlFor=\"backgroundColor\" className=\"text-sm font-medium\">\n                Background color\n              </label>\n              <input id=\"backgroundColor\" name=\"backgroundColor\" type=\"color\" className=\"mt-1 h-10 w-full rounded border\" defaultValue={cfg.backgroundColor} />\n            </div>\n\n            <div className=\"space-y-1\">\n              <label htmlFor=\"logoPath\" className=\"text-sm font-medium\">\n                Logo path\n              </label>\n              <input id=\"logoPath\" name=\"logoPath\" className=\"mt-1 w-full rounded border px-3 py-2 text-sm\" placeholder=\"/branding/acme-logo.svg\" defaultValue={cfg.logoPath} />\n            </div>\n          </div>\n\n          <button type=\"submit\" className=\"rounded bg-black px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800\">\n            Save brand &amp; go to desktop\n          </button>\n        </Form>\n      </section>\n    </main>;\n}\n_s(OnboardingRoute, \"2ACgQRc0Hsx3bXvsSD0J9D+F1v4=\", false, function () {\n  return [useLoaderData];\n});\n_c = OnboardingRoute;\nvar _c;\n$RefreshReg$(_c, \"OnboardingRoute\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": []
}
