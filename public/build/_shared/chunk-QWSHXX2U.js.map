{
  "version": 3,
  "sources": ["../../../app/utils/crypto.client.ts"],
  "sourcesContent": ["// REMIX HMR BEGIN\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\nimport.meta.hot = __hmr__.createHotContext(\n//@ts-expect-error\n\"app\\\\utils\\\\crypto.client.ts\"\n);\nimport.meta.hot.lastModified = \"1764285760370.684\";\n}\n// REMIX HMR END\n\nconst ALG: AesKeyGenParams = { name: \"AES-GCM\", length: 256 };\n\nexport async function ensureDemoKey(): Promise<CryptoKey> {\n  const existing = sessionStorage.getItem(\"demo_secret_key_jwk\");\n  if (existing) {\n    const jwk = JSON.parse(existing);\n    return await crypto.subtle.importKey(\"jwk\", jwk, ALG, true, [\"encrypt\", \"decrypt\"]);\n  }\n  const key = await crypto.subtle.generateKey(ALG, true, [\"encrypt\", \"decrypt\"]);\n  const jwk = await crypto.subtle.exportKey(\"jwk\", key);\n  sessionStorage.setItem(\"demo_secret_key_jwk\", JSON.stringify(jwk));\n  sessionStorage.setItem(\"demo_public_key\", \"present\");\n  sessionStorage.setItem(\"demo_private_key\", \"present\");\n  return key;\n}\n\nexport async function encryptJson(obj: unknown): Promise<{ ivB64: string; cipherB64: string }> {\n  const key = await ensureDemoKey();\n  const iv = crypto.getRandomValues(new Uint8Array(12));\n  const plain = new TextEncoder().encode(JSON.stringify(obj));\n  const cipher = await crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, plain);\n  return {\n    ivB64: btoa(String.fromCharCode(...iv)),\n    cipherB64: btoa(String.fromCharCode(...new Uint8Array(cipher)))\n  };\n}\n"],
  "mappings": ";;;;;AAEA,IAAI,aAAa;AACjB,cAAY,MAAc;AAAA;AAAA,IAE1B;AAAA,EACA;AACA,cAAY,IAAI,eAAe;AAC/B;AAGA,IAAM,MAAuB,EAAE,MAAM,WAAW,QAAQ,IAAI;AAE5D,eAAsB,gBAAoC;AACxD,QAAM,WAAW,eAAe,QAAQ,qBAAqB;AAC7D,MAAI,UAAU;AACZ,UAAMA,OAAM,KAAK,MAAM,QAAQ;AAC/B,WAAO,MAAM,OAAO,OAAO,UAAU,OAAOA,MAAK,KAAK,MAAM,CAAC,WAAW,SAAS,CAAC;AAAA,EACpF;AACA,QAAM,MAAM,MAAM,OAAO,OAAO,YAAY,KAAK,MAAM,CAAC,WAAW,SAAS,CAAC;AAC7E,QAAM,MAAM,MAAM,OAAO,OAAO,UAAU,OAAO,GAAG;AACpD,iBAAe,QAAQ,uBAAuB,KAAK,UAAU,GAAG,CAAC;AACjE,iBAAe,QAAQ,mBAAmB,SAAS;AACnD,iBAAe,QAAQ,oBAAoB,SAAS;AACpD,SAAO;AACT;AAEA,eAAsB,YAAY,KAA6D;AAC7F,QAAM,MAAM,MAAM,cAAc;AAChC,QAAM,KAAK,OAAO,gBAAgB,IAAI,WAAW,EAAE,CAAC;AACpD,QAAM,QAAQ,IAAI,YAAY,EAAE,OAAO,KAAK,UAAU,GAAG,CAAC;AAC1D,QAAM,SAAS,MAAM,OAAO,OAAO,QAAQ,EAAE,MAAM,WAAW,GAAG,GAAG,KAAK,KAAK;AAC9E,SAAO;AAAA,IACL,OAAO,KAAK,OAAO,aAAa,GAAG,EAAE,CAAC;AAAA,IACtC,WAAW,KAAK,OAAO,aAAa,GAAG,IAAI,WAAW,MAAM,CAAC,CAAC;AAAA,EAChE;AACF;",
  "names": ["jwk"]
}
